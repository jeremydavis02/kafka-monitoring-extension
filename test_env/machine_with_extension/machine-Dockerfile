FROM --platform=linux/amd64 appdynamics/machine-agent:latest

LABEL name="AppDynamics MachineAgent Kafka Extension"

#COPY ../../target/KafkaMonitor-2.0.5.zip /tmp
#RUN unzip -oq /tmp/KafkaMonitor-2.0.5.zip -d /opt/appdynamics/monitors/
COPY controller-info.xml /opt/appdynamics/conf/
#totally differen config.yml and folder for below
#COPY config.yml /opt/appdynamics/monitors/MqttMonitor/
COPY log4j.xml /opt/appdynamics/conf/logging/

#need to run to make sure all the unzipped and copied files have same perms/user/group
USER root
RUN chown -R appdynamics:0 /opt/appdynamics && \
chmod -R 774 /opt/appdynamics
USER appdynamics
